{
  "provider": {
    "name": "crd_case_worker_ref_service"
  },
  "consumer": {
    "name": "am_org_role_mapping"
  },
  "interactions": [
    {
      "description": "CRD takes s2s/auth token and returns user profiles",
      "request": {
        "method": "POST",
        "path": "/refdata/case-worker/users/fetchUsersById",
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "userIds": [
            234873,
            234879
          ]
        }
      },
      "response": {
        "status": 200,
        "headers": {
          "Content-Type": "application/vnd.uk.gov.hmcts.role-assignment-service.post-assignment-query-request+json;charset=UTF-8;version=1.0"
        },
        "body": {
          "": [
            {
              "email_id": "sam.test@gmail.com",
              "base_location": [
                {
                  "is_primary": true,
                  "location": "Aberdeen Tribunal Hearing Centre",
                  "location_id": "2191654"
                }
              ],
              "role": [
                {
                  "role": "senior-tribunal-caseworker",
                  "is_primary": true,
                  "role_id": "1"
                }
              ],
              "last_name": "TestSurname",
              "work_area": [
                {
                  "area_of_work": "1",
                  "service_code": "BFA1"
                }
              ],
              "idamRoles": null,
              "user_type": "HMCTS",
              "regionId": "1",
              "user_type_id": "1",
              "id": "91e07fe0-9575-472b-bd1f-33be2944c1f4",
              "region": "National",
              "delete_flag": false,
              "first_name": "testFirstname"
            },
            {
              "email_id": "sam.test@gmail.com",
              "base_location": [
                {
                  "is_primary": true,
                  "location": "Aberdeen Tribunal Hearing Centre",
                  "location_id": "2191654"
                }
              ],
              "role": [
                {
                  "role": "senior-tribunal-caseworker",
                  "is_primary": true,
                  "role_id": "1"
                }
              ],
              "last_name": "TestSurname",
              "work_area": [
                {
                  "area_of_work": "1",
                  "service_code": "BFA1"
                }
              ],
              "idamRoles": null,
              "user_type": "HMCTS",
              "regionId": "1",
              "user_type_id": "1",
              "id": "91e07fe0-9575-472b-bd1f-33be2944c1f4",
              "region": "National",
              "delete_flag": false,
              "first_name": "testFirstname"
            }
          ]
        },
        "matchingRules": {
          "body": {
            "$.": {
              "matchers": [
                {
                  "match": "type",
                  "min": 2
                },
                {
                  "match": "type",
                  "min": 2
                }
              ],
              "combine": "AND"
            },
            "$.[*].id": {
              "matchers": [
                {
                  "match": "type"
                }
              ],
              "combine": "AND"
            },
            "$.[*].base_location[0].location_id": {
              "matchers": [
                {
                  "match": "type"
                }
              ],
              "combine": "AND"
            },
            "$.[*].base_location[0].location": {
              "matchers": [
                {
                  "match": "type"
                }
              ],
              "combine": "AND"
            },
            "$.[*].role[0].role_id": {
              "matchers": [
                {
                  "match": "type"
                }
              ],
              "combine": "AND"
            },
            "$.[*].role[0].role": {
              "matchers": [
                {
                  "match": "type"
                }
              ],
              "combine": "AND"
            },
            "$.[*].work_area[0].service_code": {
              "matchers": [
                {
                  "match": "type"
                }
              ],
              "combine": "AND"
            },
            "$.[*].work_area[0].area_of_work": {
              "matchers": [
                {
                  "match": "type"
                }
              ],
              "combine": "AND"
            }
          }
        }
      },
      "providerStates": [
        {
          "name": "A list of multiple users for CRD request"
        }
      ]
    },
    {
      "description": "CRD takes s2s/auth token and returns user profiles",
      "request": {
        "method": "POST",
        "path": "/refdata/case-worker/users/fetchUsersById",
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "userIds": [
            234873
          ]
        }
      },
      "response": {
        "status": 200,
        "headers": {
          "Content-Type": "application/vnd.uk.gov.hmcts.role-assignment-service.post-assignment-query-request+json;charset=UTF-8;version=1.0"
        },
        "body": {
          "": [
            {
              "email_id": "sam.test@gmail.com",
              "base_location": [
                {
                  "is_primary": true,
                  "location": "Aberdeen Tribunal Hearing Centre",
                  "location_id": "2191654"
                }
              ],
              "role": [
                {
                  "role": "senior-tribunal-caseworker",
                  "is_primary": true,
                  "role_id": "1"
                }
              ],
              "last_name": "TestSurname",
              "work_area": [
                {
                  "area_of_work": "1",
                  "service_code": "BFA1"
                }
              ],
              "idamRoles": null,
              "user_type": "HMCTS",
              "regionId": "1",
              "user_type_id": "1",
              "id": "91e07fe0-9575-472b-bd1f-33be2944c1f4",
              "region": "National",
              "delete_flag": false,
              "first_name": "testFirstname"
            }
          ]
        },
        "matchingRules": {
          "body": {
            "$.": {
              "matchers": [
                {
                  "match": "type",
                  "min": 1
                }
              ],
              "combine": "AND"
            },
            "$.[*].id": {
              "matchers": [
                {
                  "match": "type"
                }
              ],
              "combine": "AND"
            },
            "$.[*].base_location[0].location_id": {
              "matchers": [
                {
                  "match": "type"
                }
              ],
              "combine": "AND"
            },
            "$.[*].base_location[0].location": {
              "matchers": [
                {
                  "match": "type"
                }
              ],
              "combine": "AND"
            },
            "$.[*].role[0].role_id": {
              "matchers": [
                {
                  "match": "type"
                }
              ],
              "combine": "AND"
            },
            "$.[*].role[0].role": {
              "matchers": [
                {
                  "match": "type"
                }
              ],
              "combine": "AND"
            },
            "$.[*].work_area[0].service_code": {
              "matchers": [
                {
                  "match": "type"
                }
              ],
              "combine": "AND"
            },
            "$.[*].work_area[0].area_of_work": {
              "matchers": [
                {
                  "match": "type"
                }
              ],
              "combine": "AND"
            }
          }
        }
      },
      "providerStates": [
        {
          "name": "A list of users for CRD request"
        }
      ]
    }
  ],
  "metadata": {
    "pactSpecification": {
      "version": "3.0.0"
    },
    "pact-jvm": {
      "version": "4.1.7"
    }
  }
}
