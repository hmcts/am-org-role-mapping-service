configurations {
    liquibase
}

//loading properties file.
Properties liquibaseProps = new Properties()
//liquibaseProps.load(new FileInputStream("$projectDir/src/main/resources/liquibase.properties"))

task migratePostgresDatabase(type: JavaExec) {
  group = "liquibase"

  classpath sourceSets.main.runtimeClasspath
  classpath configurations.liquibase
  main = "liquibase.integration.commandline.Main"
  args "--changeLogFile=./src/main/resources/db/changelog/db.changelog-master.xml"
  args "--username=" + liquibaseProps.getProperty('username')
  args "--password=" + liquibaseProps.getProperty('password')
  args "--url=" + liquibaseProps.getProperty('url')
  args "--driver=" + liquibaseProps.getProperty('driver')
  args "update"
}
